# Descriptive Statistics

In the chapter, I have mentioned that there are **descriptive statistics** that describes the **sample data** we collected, and **inferential statistics** that helps us make conclusions about the **population** using the sample. In this chapter, we will learn about basic descriptive statistics and methods to summarize the **sample** data.

There are two main ways to summarize the data: **visual presentation** (plots) and **numeric summary**. The type of plots and numeric summaries differ based on the type of the data variables that we are considering. 

## Types of Variables

We have discussed briefly in the last lesson that there are two types of variables **quantitative** or **qualitative** variables. The table below compiles a more detailed comparison between these two types of variables. 

```{r des-vartype, echo=FALSE, message=FALSE, warnings=FALSE, results='asis'}
tabl <- "
| Quantitative (numeric) variable | Qualitative (categorical) variable |
| ----------- | ----------- |
| - Takes on numeric values | - Takes on levels/categories |
| - Quantifies some aspect of an individual or object | - Qualifies some aspect of an individual or object |
| - Can be further classified as discrete or continuous | - Can be further classified as ordinal \\ (have a natural ordering) or non-ordinal | 
|  | - Can be binary (two levels) or categorical (more than two levels) |
| - Examples include: Time, Height, Weight, Age, Temperature, Price, etc. | - Examples include: Color, Race, Gender, Province, Faculty, Blood type, etc. |
"
cat(tabl)
```

## Summaries of Qualitative Variables

### Frequency

Qualitative variables can be summarized by 

- **frequency**: the number of units/observations (the count) in each category

- **relative frequency**: the proportion of observations in each category 
    \[\frac{\text{frequency}}{\text{total number of observations}}\]

- **precentage relative frequency:** the relative frequency expressed as a percentage
    \[\frac{\text{frequency}}{\text{total number of observations}}\times 100\%\]

### Plots

The frequencies can be plotted using a 

- **bar plot**: can be used for comparison among categories.

    - The $x$-axis typically represents the different categories and the $y$-axis can capture the frequency, relative frequency or \% relative frequency.

    - In a bar plot, the categories can be sorted in any order, sometimes it is prefered to order the categories by some (natural) ordering for clarity.

    - There is usually a space in between the bars to separate the categories.

- **pie plot**: can be used to show the composition of the variable (i.e., share of total of each category).

    - Typically the (percentage) relative frequency of each category is plotted within a circle so that the area for each category adds up to the area of the whole circle (100\%) 

::: {.myNote}
**<ins>Notes:</ins>** It is best to illustrate these plots using an example. We will continue the students' rent example in Chapter [1](#chap-step). And from this chapter, we will work with the data set `r embed_data_file("data/dataset/fakeRent.csv")`. We will assume that this data set records the **sample** I collect to study UWaterloo students' rent^[Note that this data is artificially generated for education purpose, not the actual data collected on actual students. More information about the data set can be found in the Appendix.]. Learn more about the data set in Appendix [C](#app-dataset). 

From this chapter, we will also include **R** codes and examples to illustrate concepts and help you analyze real data sets in your future. Learn about **R** in Appendix [A](#app-rintro).
:::

::: {.empty}
:::

::: {.myExample data-latex=""}
::: {.example}
Suppose I am interested in the faculty of students in the sample I collected in the `fakeRent.csv` data set. I can open the file in Excel and calculate the frequency and relative frequency as follows

| Faculty | Frequency | \% Relative frequency |
| :----------- | :-----------: | :-----------: | 
| Arts | $160$ | $\frac{160}{1345}\times 100 = 11.9$ |
| Engineering | $246$ | $18.3$ |
| Environment | $125$ | $9.3$ |
| Health | $199$ | $14.8$ |
| Math | $376$ | $27.9$ |
| Science | $239$ | $17.8$ |
| **Total** | **1345** | **100** |

Or I can calculate the frequency and \% relative frequency in **R** with the following code

```{r des-read-data-show, echo=TRUE, eval=FALSE}
# read the data set and save it as "rent" in the environment
rent <- read.csv("fakeRent.csv")
```

```{r des-read-data, echo=FALSE, eval=TRUE}
# read the data set and save it as "rent" in the environment
rent <- read.csv("data/dataset/fakeRent.csv")
```

```{r des-freq-table, echo=TRUE,}
# calculate the frequency table and save it as "fac.freq" in the R environment
fac.freq <- table(rent$faculty)

# print the frequency table
fac.freq

# calculate the relative frequency table and save it as "fac.relfreq" in the R environment
fac.relfreq <- table(rent$faculty)/nrow(rent) #nrow(rent) gives the number of students observed in the "rent" data set

# print the relative frequency table
fac.relfreq
```

Using these frequency tables, we can plot a bar plot in **R**.

```{r des-bar-onevar, echo=TRUE, out.height="35%", fig.align='center', fig.cap="Bar plot of students' faculties in the sample data"}
# plot the bar plot of the calculated frequency table
bp <- barplot(fac.relfreq,                             # frequency table
        space = 0.5,                                   # space in between the bars
        cex.names = 0.6,                               # font size of bar names in the x-axis
        ylim = c(0, 0.32),                             # limits for y-axis
        ylab = "% Relative frequency",                 # label of the y-axis
        main = "Bar plot for the faculty of students") # title of the plot

# annotate numbers at the top of the barplot
text(bp,                                           # the barplot
     fac.relfreq+0.02,                             # positions of the numbers
     labels=paste0(round(fac.relfreq*100, 1),"%"), # the numbers, as percentage
     cex=0.8)                                      # size of the annotated numbers
```

We can also create a pie plot.

```{r des-pie, echo=TRUE, out.height="30%", fig.align='center', fig.cap="Pie plot of students' faculties in the sample data"}
# create the pie plot
pie(fac.relfreq,                                    # the frequency table
    labels = paste0(round(fac.relfreq*100, 1),"%"), # the number annotated in the pie plot
    clockwise = TRUE,                               # whether the pie will plot the data clock-wise  
    col = c("red", "orange", "yellow", 
            "green", "blue", "violet"),             # colors of the pie slices
    main = "Pie plot of faculty")                   # title of the plot

# drawing a legend in the plot
legend("bottomleft",                       # position of the legend relative to the plot
       legend = names(fac.relfreq),        # names of the pie slices (i.e., the column names of the frequency table)
       fill = c("red", "orange", "yellow", 
            "green", "blue", "violet"),    # colors of the pie slices 
       cex = 0.7)                          # size of the legend's words
```

::: 
:::

::: {.empty}
:::

To present data about **two** qualitative variables, we can plot a **side-by-side** or a **stacked** bar plot. 

::: {.myExample data-latex=""}
::: {.example}
Now, suppose that I am interested in both students' faculty and gender. I can calculate a two-way frequency table.

```{r des-freq-table-twoway, echo=TRUE}
# calculate a two-way frequency table by gender and faculty and save it as an object called "fac.gender" in R environment
fac.gender <- table(rent$gender, rent$faculty)

# print the calculated frequency table
fac.gender
```

The side-by-side bar plot of students' faculty and gender can be plotted using the following **R** code:

```{r des-side-by-side, echo=TRUE, out.width="65%", fig.align='center', fig.cap="Counts of students by faculty and gender"}
# create a side-by-side bar plot
bp2 <- barplot(fac.gender, 
               cex.names = 0.6, 
               ylab = "frequency", 
               main = "Number of students by faculty and gender", 
               beside = TRUE,                     # whether the bar plot is side-by-side
               col = c("red", "green", "yellow"), # colors of the different genders
               ylim = c(0, 190))

# add text annotation to the bar plot
text(bp2, 
     fac.gender+8, 
     fac.gender,    # now the numbers are the counts instead of percentages, because fac.gender is a frequency table, not a % relative frequency table as in Figure 2.1
     cex=0.8)

# add a legend to the bar plot
legend("topleft", 
       legend = rownames(fac.gender), 
       fill = c("red", "green", "yellow"),
       cex = 1)
```

From the plot, we can see that there are some faculties where the number of males is more than that of females and on the other hand, there are faculties where the opposite applies. Remember that this result is only reflecting the sample that I collected, it does **not** necessarily reflect the real distribution of students in the population.

To plot a **stacked** bar plot, change the `beside` argument from `TRUE` to `FALSE`. However, it is not straightforward to annotate the numbers into the stacked bar plot. Look at the code below. 

```{r des-stacked, echo=TRUE, out.width="65%", fig.align='center', fig.cap="Counts of students by faculty and gender"}
# create a side-by-side bar plot
bp2 <- barplot(fac.gender, 
               cex.names = 0.6, 
               ylab = "frequency", 
               main = "Number of students by faculty and gender", 
               beside = FALSE, # now the bar plot is stacked instead of side-by-side
               col = c("red", "green", "yellow"),        
               ylim = c(0, 500))

# calculate tables to input as annotated texts in the plot
fac.gender.txt <- t(fac.gender)

# function to calculate the the y-coordinate at the middle of each stacked bar
# you do not need to understand this function in details, just run the code 
stacked_position <- function(mat) {
  ret <- mat
  for (i in 1:ncol(mat)) {
    if (i == 1) {
      ret[,i] <- mat[,i]/2
    } else {
      ret[,i] <- ret[,i-1] + mat[,i-1]/2 + mat[,i]/2
    }
  }
  ret
}
  
# calculate the position of the annotated texts in the plot using the stacked_position function defined above
fac.gender.txt.position <- stacked_position(fac.gender.txt)

# add text annotation to the bar plot
text(bp2, 
     fac.gender.txt.position, 
     fac.gender.txt,
     cex=0.8)

# add a legend to the bar plot
legend("topleft", 
       legend = rownames(fac.gender), 
       fill = c("red", "green", "yellow"),
       cex = 1)
```

::: 
:::

::: {.empty}
:::

::: {.myExercise data-latex=""}
::: {.exercise}
a. When will the data I collect likely represent the real distribution of students in UWaterloo?
b. Recreate the stacked bar plot but with \% relative frequency instead of frequency table. 
:::
:::

## Summaries of Quantitative Variables

### Stem Plots

For a **small** sample size (small number of sampled observations), **one quantitative variable** can be presented using a stem (or stem-and-leaf) plot.

::: {.myExample data-latex=""}
::: {.example #ex-24-leaf}
Consider the first 24 students in the `fakeRent.csv` data set. Their rents are

\[\begin{array}{cccccccc}
890 & 1120 & 590 & 830 & 910 & 940 & 550 & 850 \\
930 & 1040 & 860 & 720 & 1020 & 540 & 680 & 700 \\
760 & 730 & 730 & 910 & 960 & 350 & 940 & 710
\end{array}\]

The stem plot for this 24 observations can be plotted in **R** using the following code:

```{r des-stem-24, echo=TRUE}
# save the first 24 rent data into a variable called "dat" in the R environment
dat <- rent$rent[1:24]

# create the stem plot
stem(dat,         # the data to be plotted
     scale = 2)   # scale = 1 gives even-numbered stems, scale = 2 gives all available stems
```
:::
:::

::: {.empty}
:::

There are three parts in the stem plot:

- **legend**: the legend says that the decimal point is two digits to the right of |. This tells us how the number is split. For example, consider the first number in the plot

    ```{r des-stem-explain, echo=FALSE, fig.align = "center"}
knitr::include_graphics(paste0(fig.path, "chap-des/stem_plot_rule.png"))
    ```
    
    To know the first number, we start by placing the decimal point at the | then move it to the right or left as specified in the legend. In the above picture, we move the decimal point two digits to the right and get 350.0

- **stem**: the number to be used to categorize the observations. In Example \@ref(exm:ex-24-leaf), the stem is the hundred. 

- **leaves**: each leaf represents an observation in our data set. In a stem plot the leaves are ordered in **ascending order**. 

From the plot in Example \@ref(exm:ex-24-leaf), we can see that there are some "leaves" that are repeated twice. This means that there are two observations having the same value. In the above plot, these are 730, 910, 940.

The stem plot is

- *pros*: easy to create and individual observations (data points) are maintained.

- *cons*: not practical when data set is large. 

### Quantiles {#des-sec-quantile}

An $x$-**quantile** of a distribution is the value at which $x$ of the data lies below this value. 

A $x$-**percentile** of a distribution is the value at which $x$ percent of the data lies below this value. 

For example, a $0.5$-quantile ($50\%$-percentile) is the value at which 50\% of the data lies below this value, i.e., half of the data lies below this value and half of the data lies above this value. Specially, this point is called the **median** of a distribution.

To find the **median**, we follow the following steps. Suppose we have $n$ observations, then

- Sort the data from the smallest to largest

- If $n$ is odd, then the median is the value at the $\frac{n+1}{2}$th position

- If $n$ is even, then the median is the average of the $\frac{n}{2}$th and $(\frac{n}{2}+1)$th value.

\vspace{-7mm}
::: {.myExample data-latex=""}
::: {.example #ex-24-median}
Consider again the first 24 values of rent in Example \@ref(exm:ex-24-leaf). The stem plot helped me sort the values. Now since I have $n=24$ observation, according to step 3, the median will be the average between the $\frac{24}{2}=12$th and the $12+1 = 13$th position. Those are the numbers highlighted in the above stem plot: $830$ and $850$. The median is
\[\frac{830+850}{2} = 840.\]
:::
:::

::: {.empty}
:::

::: {.myExercise data-latex=""}
::: .{exercise}
If I omit the last observation of the data in Example \@ref(exm:ex-24-median), i.e., $710$, what will be the median of my data now?
:::
:::

Generally, to find $x$-quantile, we follow the following steps 

- Sort the data from smallest to largest

- The position of interest is $n \times x$.

- If this number is **not an integer**, we round this up to the next whole number. The value in that position is our $x$-quantile.

- If this number is an integer, the $x$-quantile is the average of the values in position $n \times x$ and $n \times x + 1$.

::: {.myExample}
::: {.example}
Consider the sorted data ($n=12$)

\[35, 54, 55, 59, 68, 70, 71, 72, 73, 73, 76, 80\]

Suppose we want to find the $0.3$-quantile. The position of our interest will then be $12 \times 0.3 = 3.6$. Because this is not an integer, we need to round this up and take the value at the $4$rd position. So the $0.3$-quantile is $59$. We can also calculate this in **R**.

```{r des-quantiles, echo=TRUE}
# save the data into a variable called "dat"
dat <- c(35, 54, 55, 59, 68, 70, 71, 72, 73, 73, 76, 80)

# calculate the 0.3-quantile
quantile(dat,         # the data whose quantile is to be calculated
         probs = 0.3, # the probability at which the quantile is calculated
         type = 2)    # the type of quantile-finding algorithm to use
```

Now suppose we want to find the $0.75$-quantile. The position of interest is $12 \times 0.75 = 9$, which is an integer. We then take the average of the values in the $9$th and $10$th position, i.e., $(73+73)/2 = 73$. The **R** code is then

```{r des-quantiles-2, echo = TRUE}
quantile(dat,         
         probs = 0.75, 
         type = 2)
```
:::
:::

### Five-number Summary

Besides the **median**, there are two other important quantiles that are usually used in statistics: the $25$ and $75$ percentiles (or the $0.25$- and $0.75$-quantiles). We call

- the $25$ percentile the **first quartile**, and denote it by **Q1**,

- the median, i.e., the $50$ percentile, the **second quartile** and denote it by **Q2**,

- the $75$ percentile the **third quartile**, and denote it by **Q3**.

\vspace{-7mm}
::: {.myExample data-latex=""}
::: {.example #ex-24-Q1Q3}
Continue with Example \@ref(exm:ex-24-median). 

Q1 is the $0.25$-quantile, so the position we are looking for is $24\times 0.25 = 6$. Because this is an integer, we take the average of the values at the $6$th and the $6+1 = 7$th position, which gives us
\[Q1 = \frac{700+710}{2} = 705.\]

Q3 is the $0.75$-quantile, so the position we are looking for is $24\times 0.75 = 18$. Because this is an integer, we take the average of the values of the $18$th and the $19$th position, which is 930 and 940. Then Q3 is
\[Q3 = \frac{930+940}{2} = 935.\]
:::
:::

::: {.empty}
:::

Q1, Q2 (the median) and Q3, together with the **minimum** and the **maximum** value in the data, are called the **five-number summary** of the data. The five-number summary of the data roughly tells us about the **distribution** in the data.

::: {.myExample data-latex=""}
::: {.example #ex-24-5num}
In the above Example \@ref(exm:ex-24-Q1Q3), the five-number summary of the $24$ observations are

- Minimum: $350$

- Q1: $705$

- Median (Q2): $840$

- Q3: $935$

- Maximum: $1120$
:::
:::

### Box Plots {#des-sec-boxplot}

**Box plots** helps us represent the distribution of a quantitative variables using the five-number summary.

```{r des-boxplot-explain, eval=TRUE, echo=FALSE, fig.cap="Elements of a box plot", message=FALSE, warning=FALSE, out.width="90%", fig.align='center'}
knitr::include_graphics(paste0(fig.path, "chap-des/boxplot.png"))
```

To draw a box plot, we follow the following steps

- calculate the five-number summary of the data,

- draw a box from Q1 to Q3, draw a line at Q2

- calculate the **interquartile range** (IQR)
    \[IQR = Q3 - Q1\]

- calculate the **upper** (UL) and **lower** limits (LL) 

    \begin{align*}
    LL & = Q1 - 1.5 \times IQR \\
    UL & = Q3 + 1.5 \times IQR
    \end{align*}

- draw the upper whisker up until the maximum value which is smaller than the UL,

- draw the lower whisker up until the minimum value which is larger than the LL,

- sometimes dotted lines are drawn at the UL and the LL,

- denote any point outside the whiskers by dot(s). These points are called the **outliers**, i.e., the extreme values when compared to the other values in the data.

::: {.myExample data-latex=""}
::: {.example}
Consider again the data in Example \@ref(exm:ex-24-leaf). From Example \@ref(exm:ex-24-5num), we know the five-number summary

- Minimum: $350$

- Q1: $705$

- Median (Q2): $840$

- Q3: $935$

- Maximum: $1120$

The interquartile is
\[IQR = 935-705 = 230\]

LL and UL are
\[LL = Q1 - IQR \times 1.5 = 705-230 \times 1.5 = 360\]
\[UL = Q3 + IQR \times 1.5 = 935+230 \times 1.5 = 1280\]

The maximum value smaller than UL is $1120$.

The minimum value larger than LL is $540$.

We can draw the box plot as follows

```{r des-boxplot, echo=TRUE, out.width="60%", fig.align='center', fig.cap="Box plot of rents for the first 24 students in the data set", fig.pos = "H"}
# save the first 24 students' rent into an object called "dat"
dat <- rent$rent[1:24]

# draw the box plot
boxplot(dat,                                 # data to be plotted
        main = "Box plot of students' rent", # title of the plot
        xlab = "rent",                       # label of the x-axis
        horizontal = TRUE)                   # whether the box plot is horizontal or vertical
```
:::
:::

::: {.empty}
:::

We can also draw side-by-side box-plots to compare the **distribution** of a quantitative variable across different categories of a qualitative variable. 

::: {.myExample}
::: {.example}
Suppose we want to compare the rent between different genders.

```{r des-boxplot-gender, echo=TRUE, out.width="60%", fig.align='center', fig.cap="Box plot of students' rents by gender"}
boxplot(rent~gender,        # box plot of rent column by gender column in the rent data set 
        data = rent,        # the data set to be plotted from
        xlab = "rent",      
        horizontal = FALSE, 
        main = "Box plot of students' rent")
```

We can see from the plot that male students seem to pay less rent than other genders. Again, this is just an observation in our sample, we should not carelessly generalize this conclusion to the whole population.
:::
:::

### Histogram

Another great way to view the distribution of quantitative data is to plot a **histogram**. The histogram is the analogue of bar plots for quantitative data, in which the categories are **intervals of values** and the height of the bars are the **frequency** or the **(percentage) relative frequency** of values that lie **within the intervals**. In a histogram, these intervals (categories) are called the **bins**.

Conventionally, we choose the bins so that they cover the whole **range** of the variable (i.e., from the minimum to the maximum) and the the bins (intervals) are of the same length. Usually, we divide the range into 5 to 20 bins. 

Note that there is **no gap** between the bins for a histogram (in contrast to the bar plot for qualitative data). This shows the **continuity of the scale** of the quantitative variable.

::: {.myExample data-latex=""}
::: {.example}
To draw a histogram of rent in the `fakeRent.csv` data, we use the code

```{r des-hist-big, echo=TRUE, out.width="55%", fig.align='center', fig.cap="Histogram of students' rent"}
hist(rent$rent,   # data to be plotted
     breaks = 10, # number of breaks to divide the range into bins of equal length
     main = "Histogram of students' of rent", 
     xlab = "rent")
```

In first plot (Figure \@ref(fig:des-hist-big)), there are 9 bins. We can zoom more closely into the data by drawing another histogram using more bins (Figure \@ref(fig:des-hist-small)).

```{r des-hist-small, echo=FALSE, out.width="55%", fig.align='center', fig.cap="Histogram of students' rent"}
hist(rent$rent, 
     breaks = 20,
     main = "Histogram of students' of rent", 
     xlab = "rent")
```
:::
:::

::: {.empty}
:::

Histogram's advantages and disadvantages:

- *pros*: visually summarize data in a nice way. With histograms, we can get an idea about the 

    - **center**: the "middle point" of the distribution

    - **spread** of the distribution

    - **shape** of the distribution

    - **outliers**: extreme observations that fall outside of the common range of other observations.

- *cons*: unlike the stem plots, we cannot know the exact value of an observation in histograms.

### Measure of Centrality

A **measure of centrality** is a **numeric** summary which gives us one value that is **representative** of the whole distribution. There are three common centrality measures

- **mode**: the value that is **most popular** in the data,

    - the value that most individuals/units have may be a great candidate the represent the whole distribution.

    - you will see that even though the rationale of the mode is sound, it is the **least popular** because
        
        - there can be more than one modes

        - there is no universal formula to calculate the mode for all distribution,

        - it is not always representative and informative.
        
- **median**: the point that divides the data into **two halves**. (We discussed this in the Section [2.3.2](#des-sec-quantile) )

    - the median lies in the **middle of the distribution** and it gives us a sense of the "middle point".

    - even though this one is more popular than the mode, it is still less popular than the mean because

        - there is a universal algorithm to find the median

        - but the algebra is not nice (for anyone familiar with calculus, the formula of the median is usually not *smooth*^[mathematically, smooth means continuously differentiable]). 

- **mean**: the **average** (or "arithmetic mean") of the data,

    - suppose the data I collect the data $x_1, x_2, ..., x_n$ ($n$ observations), then the mean is
    \[\frac{x_1+x_2 + ... + x_n}{n}\]

    - notation: $\bar{x}$

    - the mean is the **closest** to all other values on average and it is the **middle of the values**

    - this is the **most popular** measure of centrality because 

        - there is a universal formula to find the mean

        - the algebra is nice 

        - the mean has a good property that we will look at in later chapters. 

::: {.myExample data-latex=""}
::: {.example #ex-24-mean}
Come back to the data in Example \@ref(exm:ex-24-leaf)

\[\begin{array}{cccccccc}
890 & 1120 & 590 & 830 & 910 & 940 & 550 & 850 \\
930 & 1040 & 860 & 720 & 1020 & 540 & 680 & 700 \\
760 & 730 & 730 & 910 & 960 & 350 & 940 & 710
\end{array}\]

The mode is the value that appears most of the time. As we discussed in Example \@ref(exm:ex-24-leaf), there are 3 values that repeats two times: $730$, $910$, $940$. These are the modes of the distribution. As it shows in this example, the mode **is usually not informative about the centrality of the distribution.**
   
The median is $840$ as we discussed in Example \@ref(exm:ex-24-median).

The mean is 
\[\frac{890 + 1120 + 590 + ... + 940 + 710}{24} = 802.5\]
:::
:::

::: {.empty}
:::

::: {.myExample data-latex=""}
::: {.example #ex-mean}
We can calculate the mean, median, and modes using **R**

```{r des-mean, echo=TRUE}
# mean of the rent column in the rent data set
mean(rent$rent)

# median of the rent 
median(rent$rent)

# or
quantile(rent$rent, probs = 0.5, type = 2)

# a function to calculate the modes
# you do not need to understand the function in details, just run the code
stat_mode <- function(vec) {
  vals <- unique(vec)
  counts <- sapply(1:length(vals), function(i) {sum(vec == vals[i])})
  vals[which(counts == max(counts))]
}

# mode of the rent
stat_mode(rent$rent)
```
:::
:::

### Measure of Variability

The **variability** or **dispersion** of a variable gives us a sense of the **spread** (i.e., how different the values in our data are) of the distribution of that variable. Some measures of variability is 

- **range**: distance between the **largest** and the **smallest** value in the data set

    - Formula: Range = Maximum value - Minimum value

    - this gives us the range of **all** the values in our data

- **interquartile range (IQR)**: the distance covered by the **middle 50\%** of the data

    - Formula: IQR = Q3 - Q1

    - this gives us the range of the **central** values in our data

- **standard deviation**: 

    - this gives us the **average difference of the values from the mean**

    - notation: $s$

    - suppose we have the data $x_1, x_2, ..., x_n$

    - one may think that we can simply average the differences
    \[\frac{(x_1 - \bar{x}) + (x_2-\bar{x}) + ... + (x_n-\bar{x})}{n} = \frac{\sum_{i=1}^n (x_i-\bar{x})}{n},\]
    however, if you pay closer attention, this formula will always be zero no matter what the values $x_1, x_2, ..., x_n$ are. This means this formula will not give us any information about the spread of the distribution.

    - another viable option is to take the absolute value of the differences
    \[\frac{|x_1 - \bar{x}| + |x_2-\bar{x}| + ... + |x_n-\bar{x}|}{n} = \frac{\sum_{i=1}^n |x_i-\bar{x}|}{n}.\]
    This is a good option, but the algebra is not nice (i.e., again not *smooth*)

    - finally, we can choose to **square** the differences, calculate the **average** then take the **square root**. In fact, this is the **formula of the standard deviation**
    \begin{align*}
    s & = \sqrt{\frac{\sum_{i=1}^n (x_i-\bar{x})^2}{n-1}} \\
    & = \sqrt{\frac{(x_1 - \bar{x})^2 + (x_2-\bar{x})^2 + ... + (x_n-\bar{x})^2}{n-1}} \\
    & = \sqrt{\frac{\sum_{i=1}^n x_i^2 - n\bar{x}^2}{n-1}}.
    \end{align*}

    - the **variance** is just the square of the **standard deviation**
      
      ::: {.center}
      ::: {.highlight}
      \[s^2 = \frac{\sum_{i=1}^n (x_i-\bar{x})^2}{n-1}\]
      :::
      :::

    - \textbf{\underline{Notes:}}
    
        - you may wonder why we divide by $n-1$ instead of $n$. We will explain this in later chapters.

        - the variance and the standard deviation are **always positive**.

        - the standard deviation, the mean, mode and median all have the **same unit** as the data. For example, the standard deviation of the rent data will be in dollars (\$).

        - the variance has the unit squared. In the rent data the unit of the variance is $\$^2$. 
    
::: {.myExample data-latex=""}
::: {.example}
Again consider the data in Example \@ref(exm:ex-24-leaf)

\[\begin{array}{cccccccc}
890 & 1120 & 590 & 830 & 910 & 940 & 550 & 850 \\
930 & 1040 & 860 & 720 & 1020 & 540 & 680 & 700 \\
760 & 730 & 730 & 910 & 960 & 350 & 940 & 710
\end{array}\]

From Example \@ref(exm:ex-24-mean), the mean is $802.5 \$$.

The variance is 

\begin{align*}
s^2 & = \frac{\sum{i=1}^24 x_i^2 - 24\bar{x}^2}{24-1} \\
& = \frac{[890^2 + 1120^2 + ... + 940^2 + 710^2] - [25\times 802.5^2]}{25-1} \\
& = 32880.43 \quad (\$^2)
\end{align*}

The standard deviation is
\[s = \sqrt{32880.43} = 181.3296 \hspace{2mm} (\$)\]
:::
:::

::: {.empty}
:::

We can also calculate the variance and standard deviation in **R**.

::: {.myExample}
::: {.example}
The variance and standard deviation of students' rent in the `fakeRent.csv` data set is
```{r des-sd-var, echo=TRUE}
# variance
var(rent$rent)

# standard deviation
sd(rent$rent)

# or standard deviation = square root of variance
sqrt(var(rent$rent))
```

:::
:::

::: {.empty}
:::

::: {.myExercise data-latex=""}
::: {.exercise}
Prove that for all data $x_1, x_2, ..., x_n$ the following hold

a.
\[\frac{\sum_{i=1}^n (x_i-\bar{x})}{n} = 0\]

b.
\[s^2 = \frac{\sum_{i=1}^n x_i^2 - n\bar{x}^2}{n-1}\]

where, by the formula,

\begin{align*}
\bar{x} & = \frac{\sum_{i=1}^n x_i}{n}, \\
s & = \frac{\sum_{i=1}^n (x_i-\bar{x})^2}{n-1}.
\end{align*}
:::
:::

### Shape of the Distribution

The stem plots, box plots, histograms help us understand the **shape** of the distribution. We can describe the shape of the distribution using the number of modes and the skewness.

#### Number of Modes

A distribution can be

- **unimodal**: the data is piled around a **single** peak

- **bimodal**: the data is piled around **two** peaks

- **multimodal**: the data is piled around **multiple** peaks

```{r des-mode, eval=TRUE, echo=FALSE, fig.cap="The number of modes.", message=FALSE, warning=FALSE, out.width="100%", fig.align='center'}
knitr::include_graphics(paste0(fig.path, "chap-des/modes.png"))
```

#### Skewness 

There are three types of skewness 

**symmetric**:

- a distribution is symmetric if the right and the left of the distribution are approximately mirror images of each other

- the values are distributed equally around the center

- we have: Mean = Median = Mode

```{r des-symmetric, eval=TRUE, echo=FALSE, fig.cap="Symmetric distribution", message=FALSE, warning=FALSE, out.width="90%", fig.align='center'}
knitr::include_graphics(paste0(fig.path, "chap-des/symmetric.png"))
```

**left-skewed**

- a distribution is **skewed to the left** if the left side extends further out than the right side, i.e., the distribution has a **longer left tail**

- imagine some guy **pulls the left tail** of a symmetric distribution to the right 

- half of the observations **spread on the left** side and the other half of the observations **concentrate on the right** of the distribution, so the median is on the right of the value range.

- we have: Mean < Median

```{r des-left-skwd, eval=TRUE, echo=FALSE, fig.cap="Left-skewed distribution", message=FALSE, warning=FALSE, out.width="90%", fig.align='center'}
knitr::include_graphics(paste0(fig.path, "chap-des/leftskewed.png"))
```

**right-skewed**

- a distribution is **skewed to the right** if the right side extends further out than the left side, i.e., the distribution has a **longer right tail**

- imagine some guy **pulls the right tail** of a symmetric distribution to the right 

- half of the observations **spread on the right** side and the other half of the observations **concentrate on the left** of the distribution, so the median is on the left of the value range.

- we have: Mean > Median

```{r des-right-skwd, eval=TRUE, echo=FALSE, fig.cap="Right-skewed distribution", message=FALSE, warning=FALSE, out.width="90%", fig.align='center', fig.pos="H"}
knitr::include_graphics(paste0(fig.path, "chap-des/rightskewed.png"))
```

::: {.myExample data-latex=""}
::: {.example}
Look at the box plot in Figure \@ref(fig:des-boxplot), the Q2 line is slightly to the right of the middle of the box, we can say that the distribution is slightly skewed to the left.

Look at the histograms in Figure \@ref(fig:des-hist-big) and \@ref(fig:des-hist-small), since the two tails look similar to each other, we say that the distribution is symmetric.
:::
:::

### Robustness to outliers

We are introduced to **outliers** in Section [2.3.4](#des-sec-boxplot) where we discuss Box plot. Recall that outliers are the **extreme values** that lie outside the common range of most other values in our data. 

When we have outliers in our data, we should ask the question: 

- is the outlier produced by some **error** in measurement or data record?

- is there another **reason** for such an outlier and is it interesting and worth our concern?

Many of the times, outliers are produced by errors. Because there are usually a few of them, outliers will not help us **generalize** or **make conclusions** for the **majority** of the cases. Therefore, we usually omit the outliers from our sample. 

Desirably, we want our numeric summaries (or measures, or statistics) to be **robust** to outliers, i.e., they will **not be affected by the existence or removal of outliers**.

In this lesson so far

- **robust** to outliers: mode, median, interquartile range

- **not robust** to outliers: mean, range, standard deviation, variance.

::: {.myNote data-latex=""}
**<ins>Notes:</ins>** In this chapter we have studied two types of **descriptive statistics**: (i) the **plots** and (ii) the **numeric summaries** (measures). Note that these are only applicable to the data we collect, i.e., **the sample**. In fact, when we talk about numeric summaries of sample data, we usually add the word "sample" in front of the name of the summaries to stress that the quantities were calculated from the sample. For example, **sample mean**, **sample median**, **sample standard deviation**, **sample variance**, etc. 

Since the summaries are calculated based on the collected sample, it may not be appropriate to **directly generalize** some results/patterns from these descriptive statistics to the **population**. That is, it is usually **naive** to say "I see this in my sample so this is what happen in the population". However, with careful caution, only when our sample is, as we discussed in Chapter [1](#chap-step), **large** and **representative** of the population, these conclusions can be made with good confidence. Again, we will understand this better when we study about **inferential statistics**.
:::